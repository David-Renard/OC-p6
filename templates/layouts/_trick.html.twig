<div class="card shadow h-100">
    <a href="{{ path('show_trick', {'slug': trick.slug }) }}" title="détail de {{ trick.name }}">
        <div class="content-card-images m-auto mt-1 shadow border-black">
            {# display main picture if there is one #}
            {% if trick.getMainPicture() %}
                <img src="{{ asset(trick.getMainPicture().url) }}" class="card-images-top" alt="{{ trick.getMainPicture().name }}"/>
            {# display default picture if there is no pictures #}
            {% elseif trick.getPictures() is empty %}
                <img src="{{ asset('build/images/freestyle.jpeg') }}" class="card-images-top default_picture-picture" alt="image par défaut"/>
            {# display 1st picture ordered by id if there is no main picture #}
            {% elseif trick.getMainPicture() is empty %}
                <img src="{{ asset(trick.getPictures()|first.url) }}" class="card-images-top" alt="{{ trick.getPictures()|first.name }}"/>
            {% endif %}
        </div>

        <div class="card-body">
                <div class="d-flex justify-content-between align-items-center card-action">
                    <p class="card-title w-100 text-start"><a href="{{ path('show_trick', {'slug': trick.slug }) }}" class="text-decoration-none">{{ trick.name }}</a></p>
                    <div class="d-flex justify-content-end w-50">
                    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                        <a href="{{ path('edit_trick', {'slug': trick.slug}) }}" class="btn btn-primary me-1"><i class="bi bi-pencil-fill" title="Modifier {{ trick.name }}"></i></a>
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal{{ trick.id }}"><i class="bi bi-trash3-fill" title="Supprimer {{ trick.name }}"></i></button>

{#                        modal window to delete the trick#}
                        <div class="modal" id="deleteModal{{ trick.id }}" tabindex="-1" aria-labelledby="deleteModal" aria-hidden="true" data-bs-backdrop="static">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="deleteModal">Supprimer {{ trick.name }}</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        Êtes-vous sûr de vouloir supprimer {{ trick.name }}?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Non</button>
                                        <a href="{{ path('delete_trick', {'slug': trick.slug}) }}" type="button" class="btn btn-warning">Oui</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    </div>
                </div>
        </div>
    </a>
</div>